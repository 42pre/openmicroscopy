<icegrid>

<!--
    OMERO Grid Application Descriptor
    Copyright 2009 Glencoe Software, Inc.  All Rights Reserved.
    Use is subject to license terms supplied in LICENSE.txt

    Configuration for use on Windows. See definition of OMERO_HOME
    parameter below.

-->

  <application name="OMERO">

    <!--
      On Windows, absolute paths are required for proper functioning.
      All the necessary paths will use the ${OMERO_HOME} parameter,
      especially in templates.xml
    -->
    <variable name="OMERO_HOME"   value="c:\\omero_dist"/>
    <variable name="OMEROPY_HOME" value="${OMERO_HOME}\\lib\\python\\"/>
    <variable name="OMEROPY_SERV" value="${OMERO_HOME}\\lib\\python\\omero\\"/>
    <variable name="PYTHONPATH"   value="PYTHONPATH=%PYTHONPATH%;${OMEROPY_HOME}"/>
    <variable name="ROUTERPORT"   value="4063"/>

    <properties id="Profile">
      <!--
      Any properties beginning with "omero" set here will
      be passed to the servers as if via "-Domero.example=value"
      were set on the command line. These values may be overwritten
      by `bin/omero config` values.
      -->
      <property name="omero.example" value="my_value"/>
	  <!-- config settings for OmeroFS (moved from fsConfig)-->
	  <property name="omero.fs.maxRetries"  value="5"/>
	  <property name="omero.fs.retryInterval"  value="3"/>
	  <property name="omero.fs.dropBoxDir"  value="DropBox"/>
	  <property name="omero.fs.eventType"  value="Create"/>
	  <property name="omero.fs.pathMode"  value="Follow"/>
	  <property name="omero.fs.dirImportWait"  value="60"/>
    </properties>

    <include file="templates.xml"/>

    <node name="master">
      <server-instance template="Glacier2Template"
        client-endpoints="tcp -p ${ROUTERPORT}"
        session-timeout="300"
        server-endpoints="tcp -h 127.0.0.1"/>
      <server-instance template="WinBlitzTemplate" index="0" config="default"/>
      <server-instance template="WinIndexerTemplate" index="0"/>
      <server-instance template="DropBoxTemplate"/>
      <server-instance template="FSTemplate"/>
      <server-instance template="WebTemplate"/>
      <server-instance template="StormTemplate"/>
      <server-instance template="ProcessorTemplate" index="0" dir=""/><!-- assumes legacy -->
      <server-instance template="TablesTemplate" index="0" dir=""/><!-- assumes legacy -->
    </node>

    <node name="backup">
      <server-instance template="BlitzTemplate" index="1" config="backup"/>
    </node>

    <node name="node1">
      <server-instance template="ProcessorTemplate" index="1" dir="/MOUNT1"/>
    </node>

    <node name="node2">
      <server-instance template="ProcessorTemplate" index="2" dir="/MOUNT2"/>
    </node>

  </application>

</icegrid>
