<project name="Omero_ImageJ" default="tools-build" basedir="." xmlns:ivy="antlib:org.apache.ivy.ant">
	<description>
		Omero_ImageJ Ant build file
	</description>

    <property name="src" location="src" />
	<property name="pluginsDir"  location="$basedir/../../IJ/plugins/" />

    <dirname property="up-three" file="${basedir}"/>
    <dirname property="up-two" file="${up-three}"/>
    <dirname property="up-one" file="${up-two}"/>
    <property name="import.dir"       value="${up-one}/antlib/resources"/>
    <import file="${import.dir}/global.xml"/>
    <import file="${import.dir}/lifecycle.xml"/>
    <import file="../../common.xml"/>

	<target name="compress" depends="package" description="generate the distribution from Eclipse bin/ directory">
		<copy flatten="true" todir="${pluginsDir}">
			<fileset dir="${target.dir}" includes="libs/*.jar,${ivy.module}.jar"/>
		</copy>
	</target>

    <!-- TOOLS BUILD API -->

    <target name="tools-init"/>
    <target name="tools-build" depends="tools-init,install" description="Creates all artifacts for tools/target"/>
    <target name="tools-dist" depends="tools-build" description="Copied artifacts to tools/target" unless="skip.compile"/>
    <target name="tools-clean" depends="clean"/>
    <target name="test-compile"/>
    <target name="test"/>
    <target name="integration"/>
    <target name="findbugs"/>

    <!-- LIFECYCLE OVERRIDE -->
    <target name="package" depends="lifecycle.package">
        <jar destfile="${target.dir}/${ivy.module}.jar" update="true">
            <fileset dir="${resrc.dir}" includes="*.config"/>
        </jar>
    </target>
</project>
