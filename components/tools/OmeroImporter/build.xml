<?xml version="1.0" encoding="utf-8"?>
<project name="OmeroImporter" default="install" basedir="." xmlns:ivy="antlib:org.apache.ivy.ant">
<!--
#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
#
# $Id$
#
# Copyright 2008 Glencoe Software, Inc. All rights reserved.
# Use is subject to license terms supplied in LICENSE.txt
#
#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
# Written by:  Josh Moore, josh at glencoesoftware.com
#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

-->
    <description>
        Build framework for the OmeroImporter GUI code. The shipped application
        is primarily built through the Eclipse .project and .classpath files,
        but this build is here to allow continuous integration testing.
    </description>

    <property name="main.class" value="ome.formats.importer.Main"/>

    <dirname property="up-two" file="${basedir}"/>
    <dirname property="up-one" file="${up-two}"/>
    <property name="import.dir"       value="${up-one}/antlib/resources"/>
    <import file="${import.dir}/global.xml"/>
    <import file="${import.dir}/dependencies.xml"/>
    <import file="${import.dir}/lifecycle.xml"/>

    <import file="../common.xml"/>

    <target name="package" depends="lifecycle.package">
        <jar destfile="${target.dir}/${ivy.module}.jar" update="true">
            <fileset dir="${resrc.dir}" includes="*.icns"/>
            <fileset dir="${src.dir}" includes="**/*.png"/>
        </jar>
    </target>

    <target name="install" depends="lifecycle.install">
       <standalone conf="client"/>
    </target>

    <target name="tools-init"/>

    <target name="tools-build" depends="tools-init,install" description="Creates all artifacts for tools/target"/>

    <target name="tools-dist" depends="deps-resolve,tools-build" description="Copied artifacts to tools/target" unless="skip.compile">
        <ivy:retrieve conf="client" pattern="${tools.dest}/client/[module]-[revision].[ext]" log="quiet"/>
        <ivy:publish artifactspattern="${target.dir}/[module].[ext]"
            resolver="tools-resolver" pubrevision="${omero.version}"
            publishivy="false" overwrite="true"/>
    </target>

    <target name="tools-clean" depends="clean"/>

</project>
